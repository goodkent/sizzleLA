<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üî• Sizzle Map - LA Food & Fun</title>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="static/css/style.css">
</head>
<body>
    <div class="container">
        <div class="filters">
            <div class="filter-header">
                <img src="static/img/logo.png" alt="Sizzle LA Logo" class="logo logo-desktop">
                <img src="static/img/logo2.png" alt="Sizzle LA Logo" class="logo logo-mobile">
                <div class="filter-section">
                    <button class="filter-btn active" data-type="all">‚ú® All</button>
                    <button class="filter-btn" data-type="restaurant">üçΩÔ∏è Restaurants</button>
                    <button class="filter-btn" data-type="cafe">‚òï Caf√©s</button>
                    <button class="filter-btn" data-type="bar">üç∏ Bars</button>
                    <button class="filter-btn" data-type="plant">üåø Plants</button>
                    <button class="filter-btn" data-type="vinyl">üéµ Vinyl</button>
                    <button class="filter-btn" data-type="favorites">‚ù§Ô∏è Favorites</button>
                </div>
            </div>
            
            <div class="filter-section" id="cuisine-section">
                <select class="cuisine-filter" id="cuisine-filter" disabled>
                    <option value="all">All Cuisines</option>
                </select>
            </div>
        </div>

        <div id="map"></div>
        
        <!-- Footer -->
        <footer class="map-footer">
            <a href="privacy.html" class="footer-link">Privacy Policy</a>
            <span class="footer-separator">‚Ä¢</span>
            <a href="#" class="footer-link" id="cookie-settings">Cookie Settings</a>
        </footer>
        
        <button class="location-btn" id="locate-btn" title="Find my location">üìç</button>
        <button class="info-btn" id="info-btn" title="About & Submit a Place">‚ÑπÔ∏è</button>
        
        <!-- Cookie Consent Banner -->
        <div class="cookie-banner" id="cookie-banner">
            <div class="cookie-content">
                <p class="cookie-text">We use cookies and Google Analytics to improve your experience. <a href="privacy.html" class="cookie-link">Learn more</a></p>
                <div class="cookie-buttons">
                    <button class="cookie-btn cookie-accept" id="accept-cookies">Accept</button>
                    <button class="cookie-btn cookie-decline" id="decline-cookies">Decline</button>
                </div>
            </div>
        </div>
        
        <!-- Offcanvas Panel -->
        <div class="offcanvas" id="offcanvas">
            <div class="offcanvas-header">
                <h2>About Sizzle LA</h2>
                <button class="close-btn" id="close-btn">‚úï</button>
            </div>
            <div class="offcanvas-body">
                <div class="about-section">
                    <p>My wife and I like to venture around LA. This app was made to help us locate the things we are interested in.</p>
                </div>
                
                <div class="form-section">
                    <h3>Suggest a Place</h3>
                    <p class="form-description">Know a spot we should check out? Let us know!</p>
                    
                    <form action="https://formspree.io/f/mnjjpvjq" method="POST" id="suggest-form">
                        <div class="form-group">
                            <label for="place-name">Place Name *</label>
                            <input type="text" id="place-name" name="place-name" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="place-type">Type *</label>
                            <select id="place-type" name="place-type" required>
                                <option value="">Select type...</option>
                                <option value="restaurant">Restaurant</option>
                                <option value="cafe">Caf√©</option>
                                <option value="bar">Bar</option>
                                <option value="plant">Plant Shop</option>
                                <option value="vinyl">Vinyl Store</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="why">Why should we check it out?</label>
                            <textarea id="why" name="why" rows="3"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="email">Your Email (optional)</label>
                            <input type="email" id="email" name="email">
                        </div>
                        
                        <button type="submit" class="submit-btn">Submit Suggestion</button>
                    </form>
                    
                    <div class="form-status" id="form-status"></div>
                </div>
            </div>
        </div>
        
        <!-- Offcanvas Overlay -->
        <div class="offcanvas-overlay" id="offcanvas-overlay"></div>
    </div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <!-- Esri Leaflet for ArcGIS Layers -->
    <script src="https://unpkg.com/esri-leaflet@3.0.12/dist/esri-leaflet.js"></script>
    
    <!-- Google tag (gtag.js) - Loaded conditionally based on cookie consent -->
    <script>
        // Check if user has accepted cookies before loading GA
        const cookieConsent = localStorage.getItem('cookieConsent');
        if (cookieConsent === 'accepted') {
            // Load Google Analytics
            const gaScript = document.createElement('script');
            gaScript.async = true;
            gaScript.src = 'https://www.googletagmanager.com/gtag/js?id=G-EXH28WZK3T';
            document.head.appendChild(gaScript);
        }
    </script>
    
    <!-- Custom JS -->
    <script src="static/js/sizzle_map.js"></script>
</body>
</html>
